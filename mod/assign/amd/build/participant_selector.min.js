define(["core/ajax","jquery","core/templates"],function(a,b,c){var d=100;return{processResults:function(a,b){return b},showMore:function(){d*=10},transport:function(e,f,g,h){var i=b(e).attr("data-assignmentid"),j=b(e).attr("data-groupid"),k=b('[data-region="configure-filters"] input[type="checkbox"]'),l=[],m=!1;k.each(function(a,c){l[b(c).attr("name")]=b(c).prop("checked")}),a.call([{methodname:"mod_assign_list_participants",args:{assignid:i,groupid:j,filter:f,limit:d+1,includeenrolments:!1}}])[0].then(function(a){var e=[],f=b("[data-showuseridentity]").data("showuseridentity").split(",");return a.length==d+1&&(a.pop(),m=!0),b.each(a,function(a,d){var g=d,h=[],i=!0;l.filter_submitted&&!d.submitted&&(i=!1),l.filter_notsubmitted&&d.submitted&&(i=!1),l.filter_requiregrading&&!d.requiregrading&&(i=!1),l.filter_grantedextension&&!d.grantedextension&&(i=!1),i&&(b.each(f,function(a,b){"undefined"!=typeof d[b]&&""!==d[b]&&(g.hasidentity=!0,h.push(d[b]))}),g.identity=h.join(", "),e.push(c.render("mod_assign/list_participant_user_summary",g).then(function(a){return{value:d.id,label:a}})))}),b.when.apply(b,e)}).then(function(){var a=[];arguments[0]&&(a=Array.prototype.slice.call(arguments)),g(a,m)})["catch"](h)}}});