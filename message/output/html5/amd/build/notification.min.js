define(["core/url","core/log","core/templates","core/notification","jquery"],function(a,b,c,d,e){return{notify:function(a,f,g,h,i){if("Notification"in window){var j={body:f,icon:i};if("undefined"!=typeof h&&(j.tag=h),"granted"===Notification.permission){var k=new Notification(a,j);k.onclick=function(){window.location.href=g}}else"denied"!==Notification.permission&&Notification.requestPermission(function(c){if("granted"===c){var d=new Notification(a,j);d.onclick=function(){window.location.href=g}}else b.warn("User denied message request")})}else{var l={title:a,content:f,url:g,id:h,iconurl:i};e(".message-html5").length||(e("body").append(e('<div class="message-html5"></div>')),e(".message-html5").click(function(){var a=e(".message-html5").data("message-url");e(this).empty(),a&&(window.location=a)})),e(".message-html5").data("message-url",g),c.render("message_html5/in-page-notification",l).done(function(a,b){c.replaceNodeContents(e(".message-html5"),a,b)}).fail(d.exception)}}}});