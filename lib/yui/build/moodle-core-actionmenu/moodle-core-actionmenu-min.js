YUI.add("moodle-core-actionmenu",function(e,t){CSS={XXX:"xxx"},RESOURCES={MENUICON:{pix:"t/contextmenu",component:"moodle"}};var n=function(){n.superclass.constructor.apply(this,arguments)};e.extend(n,e.Base,{initializer:function(){var t=[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL];right_to_left()&&(t=[e.WidgetPositionAlign.TR,e.WidgetPositionAlign.BR]),e.all(".commands").each(function(){var n=e.Node.create("<img/>"),r=M.util.image_url(RESOURCES.MENUICON.pix,RESOURCES.MENUICON.component),i=e.Node.create("<a/>");i.setAttribute("href","#"),i.addClass("actionmenu"),n.setAttribute("src",r),i.appendChild(n),this.get("parentNode").insertBefore(i,this);var s=new e.Overlay({bodyContent:this,visible:!1,align:{node:n,points:t},zIndex:10});s.render(),s.get("boundingBox").on("focusoutside",s.hide,s),i.setData("actionmenu",s)}),e.one("body").delegate("click",this.toggleMenu,".actionmenu"),e.one("body").on("key",this.hideAllMenus,"esc",this)},hideAllMenus:function(){e.all(".actionmenu").each(function(){var e=this.getData("actionmenu");e&&e.hide()})},toggleMenu:function(e){var t=this.getData("actionmenu");t.get("visible")?t.hide():(M.core.actionmenu.instance.hideAllMenus(),t.show()),e.preventDefault()}},{NAME:"moodle-core-actionmenu",ATTRS:{}}),M.core=M.core||{},M.core.actionmenu=M.core.actionmenu||{},M.core.actionmenu.init=M.core.actionmenu.init||function(e){M.core.actionmenu.instance=M.core.actionmenu.instance||new n(e)}},"@VERSION@",{requires:["base","node","overlay","event"]});
